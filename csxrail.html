<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Railroad Operations Intelligence Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', system-ui, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        function RailroadOpsDashboard() {
            const [activeTab, setActiveTab] = useState('overview');

            const velocityData = {
                current: { e2e: 20.21, stb: 26.2 },
                prior: { e2e: 18.4, stb: 24.8 },
                target: { e2e: 22.0, stb: 28.0 }
            };

            const themeData = [
                { theme: 'Frozen Switches', count: 23, pct: 28, severity: 'critical' },
                { theme: 'Crew Issues', count: 18, pct: 22, severity: 'high' },
                { theme: 'Terminal Congestion', count: 12, pct: 15, severity: 'medium' },
                { theme: 'Broken Rail', count: 8, pct: 10, severity: 'high' },
                { theme: 'Air Brake Issues', count: 7, pct: 9, severity: 'medium' }
            ];

            const terminals = [
                { name: 'Nashville/Radnor', status: 'critical', issues: 8, mainIssue: 'Frozen switches throughout yard' },
                { name: 'Cleveland', status: 'warning', issues: 4, mainIssue: '3 switch failures on Greenwich' },
                { name: 'Buffalo/Selkirk', status: 'warning', issues: 3, mainIssue: '2-hour spacing, broken rail' },
                { name: 'Rigby (Portland)', status: 'critical', issues: 1, mainIssue: 'Active derailment M42726' },
                { name: 'Birmingham', status: 'ok', issues: 2, mainIssue: 'Merrily switch work window' }
            ];

            const problemTrains = [
                { train4: 'M585', train6: 'M58527', issues: ['Switch delay', 'Sparking car'], impact: 'RECREW', terminal: 'Nashville' },
                { train4: 'M427', train6: 'M42726', issues: ['Derailment'], impact: 'DERAIL', terminal: 'Rigby' },
                { train4: 'IO25', train6: 'IO2525', issues: ['Broken rail delay'], impact: 'LATE UPS', terminal: 'Jacksonville' },
                { train4: 'M634', train6: 'M63425', issues: ['Warm bearing'], impact: 'RECREW', terminal: 'Buffalo' },
                { train4: 'N565', train6: 'N56524', issues: ['Air build issues'], impact: 'RECREW', terminal: 'Garrett' }
            ];

            const constraints = [
                { type: 'Physical', name: 'North Radnor crossover switch', cause: 'Frozen in sub-zero temps', solution: 'Station maintainer during cold events', location: 'Nashville' },
                { type: 'Physical', name: 'Greenwich Sub switches', cause: 'Wind-packed snow', solution: 'Preemptive clearing schedule', location: 'Cleveland' },
                { type: 'Procedural', name: 'Crew mark-offs (double digits)', cause: 'Weather, sick calls', solution: 'Proactive lineup coverage', location: 'Multiple' },
                { type: 'Procedural', name: '2-hour spacing requirement', cause: 'Terminal congestion', solution: 'Improve hump production', location: 'Selkirk' }
            ];

            const getStatusColor = (status) => {
                const colors = { critical: 'bg-red-500', warning: 'bg-yellow-500', ok: 'bg-green-500' };
                return colors[status] || 'bg-gray-500';
            };

            const getSeverityBg = (severity) => {
                const colors = { critical: 'bg-red-500', high: 'bg-orange-500', medium: 'bg-yellow-500', low: 'bg-green-500' };
                return colors[severity] || 'bg-gray-500';
            };

            const getImpactStyle = (impact) => {
                const styles = {
                    'DERAIL': 'bg-red-600 text-white',
                    'RECREW': 'bg-orange-500 text-white',
                    'LATE UPS': 'bg-yellow-500 text-black'
                };
                return styles[impact] || 'bg-gray-500 text-white';
            };

            return (
                <div className="min-h-screen bg-slate-900 text-white p-4">
                    {/* Header */}
                    <div className="bg-slate-800 rounded-xl p-4 mb-4 flex items-center justify-between">
                        <div className="flex items-center gap-3">
                            <div className="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center font-bold text-xl">RO</div>
                            <div>
                                <h1 className="text-xl font-bold">Railroad Operations Intelligence</h1>
                                <p className="text-sm text-slate-400">0600 Net Ops Call Analysis ‚Ä¢ January 27, 2026 ‚Ä¢ Duration: 2h 33m</p>
                            </div>
                        </div>
                        <div className="flex items-center gap-4">
                            <div className="text-right">
                                <p className="text-xs text-slate-400">Analysis Status</p>
                                <p className="text-green-400 font-semibold flex items-center gap-2">
                                    <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                    Complete
                                </p>
                            </div>
                        </div>
                    </div>

                    {/* Navigation */}
                    <div className="flex gap-2 mb-4 flex-wrap">
                        {['overview', 'terminals', 'trains', 'constraints', 'trends'].map(tab => (
                            <button
                                key={tab}
                                onClick={() => setActiveTab(tab)}
                                className={`px-4 py-2 rounded-lg text-sm font-medium capitalize transition-all ${
                                    activeTab === tab 
                                        ? 'bg-blue-600 text-white shadow-lg shadow-blue-600/30' 
                                        : 'bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white'
                                }`}
                            >
                                {tab}
                            </button>
                        ))}
                    </div>

                    {/* Overview Tab */}
                    {activeTab === 'overview' && (
                        <div className="space-y-4">
                            {/* Velocity Cards */}
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div className="bg-slate-800 rounded-xl p-5 border border-slate-700 hover:border-green-500/50 transition-colors">
                                    <p className="text-slate-400 text-sm mb-1">E2E Velocity</p>
                                    <div className="flex items-baseline gap-2">
                                        <span className="text-3xl font-bold text-green-400">{velocityData.current.e2e}</span>
                                        <span className="text-green-400 text-sm">‚Üë {(velocityData.current.e2e - velocityData.prior.e2e).toFixed(1)}</span>
                                    </div>
                                    <div className="mt-2 h-2 bg-slate-700 rounded-full overflow-hidden">
                                        <div className="h-full bg-green-500 rounded-full transition-all" style={{width: `${(velocityData.current.e2e/velocityData.target.e2e)*100}%`}}></div>
                                    </div>
                                    <p className="text-xs text-slate-500 mt-1">Target: {velocityData.target.e2e}</p>
                                </div>
                                <div className="bg-slate-800 rounded-xl p-5 border border-slate-700 hover:border-green-500/50 transition-colors">
                                    <p className="text-slate-400 text-sm mb-1">STB Velocity</p>
                                    <div className="flex items-baseline gap-2">
                                        <span className="text-3xl font-bold text-green-400">{velocityData.current.stb}</span>
                                        <span className="text-green-400 text-sm">‚Üë {(velocityData.current.stb - velocityData.prior.stb).toFixed(1)}</span>
                                    </div>
                                    <div className="mt-2 h-2 bg-slate-700 rounded-full overflow-hidden">
                                        <div className="h-full bg-green-500 rounded-full" style={{width: `${(velocityData.current.stb/velocityData.target.stb)*100}%`}}></div>
                                    </div>
                                    <p className="text-xs text-slate-500 mt-1">Target: {velocityData.target.stb}</p>
                                </div>
                                <div className="bg-slate-800 rounded-xl p-5 border border-slate-700 hover:border-orange-500/50 transition-colors">
                                    <p className="text-slate-400 text-sm mb-1">Active Trains</p>
                                    <span className="text-3xl font-bold">198</span>
                                    <p className="text-orange-400 text-sm mt-1">57 running late (29%)</p>
                                    <p className="text-xs text-slate-500">25 on last leg</p>
                                </div>
                                <div className="bg-slate-800 rounded-xl p-5 border border-slate-700 hover:border-yellow-500/50 transition-colors">
                                    <p className="text-slate-400 text-sm mb-1">Crew Holding</p>
                                    <span className="text-3xl font-bold text-yellow-400">13</span>
                                    <p className="text-slate-400 text-sm mt-1">7 home / 6 away</p>
                                    <p className="text-xs text-red-400">5 re-crews pending</p>
                                </div>
                            </div>

                            {/* Themes & Terminals */}
                            <div className="grid md:grid-cols-2 gap-4">
                                <div className="bg-slate-800 rounded-xl p-5 border border-slate-700">
                                    <h2 className="font-semibold text-lg mb-4 flex items-center gap-2">
                                        <span className="text-xl">üìä</span> Operational Themes
                                    </h2>
                                    <div className="space-y-3">
                                        {themeData.map((item, idx) => (
                                            <div key={idx} className="flex items-center gap-3">
                                                <span className="w-32 text-sm text-slate-300 truncate">{item.theme}</span>
                                                <div className="flex-1 h-6 bg-slate-700 rounded-full overflow-hidden">
                                                    <div 
                                                        className={`h-full ${getSeverityBg(item.severity)} transition-all`} 
                                                        style={{width: `${item.pct}%`}}
                                                    ></div>
                                                </div>
                                                <span className="w-10 text-right font-mono text-sm font-bold">{item.count}</span>
                                                <span className={`w-12 text-right text-xs ${
                                                    item.severity === 'critical' ? 'text-red-400' :
                                                    item.severity === 'high' ? 'text-orange-400' : 'text-yellow-400'
                                                }`}>{item.pct}%</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="bg-slate-800 rounded-xl p-5 border border-slate-700">
                                    <h2 className="font-semibold text-lg mb-4 flex items-center gap-2">
                                        <span className="text-xl">üöâ</span> Terminal Status
                                    </h2>
                                    <div className="space-y-2">
                                        {terminals.map((t, idx) => (
                                            <div key={idx} className={`flex items-center gap-3 p-3 rounded-lg border transition-colors cursor-pointer hover:bg-slate-700/50 ${
                                                t.status === 'critical' ? 'bg-red-500/10 border-red-500/30' :
                                                t.status === 'warning' ? 'bg-yellow-500/10 border-yellow-500/30' :
                                                'bg-green-500/10 border-green-500/30'
                                            }`}>
                                                <div className={`w-3 h-3 rounded-full ${getStatusColor(t.status)}`}></div>
                                                <div className="flex-1 min-w-0">
                                                    <p className="font-medium truncate">{t.name}</p>
                                                    <p className="text-xs text-slate-400 truncate">{t.mainIssue}</p>
                                                </div>
                                                <span className={`px-2 py-1 rounded text-xs font-bold ${
                                                    t.status === 'critical' ? 'bg-red-500/20 text-red-400' :
                                                    t.status === 'warning' ? 'bg-yellow-500/20 text-yellow-400' :
                                                    'bg-green-500/20 text-green-400'
                                                }`}>{t.issues}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Problem Trains */}
                            <div className="bg-slate-800 rounded-xl p-5 border border-slate-700">
                                <h2 className="font-semibold text-lg mb-4 flex items-center gap-2">
                                    <span className="text-xl">üöÇ</span> Problem Trains (Train-4 Analysis)
                                </h2>
                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm">
                                        <thead>
                                            <tr className="text-left text-slate-400 border-b border-slate-700">
                                                <th className="pb-3 font-medium">Train-4</th>
                                                <th className="pb-3 font-medium">Train-6</th>
                                                <th className="pb-3 font-medium">Terminal</th>
                                                <th className="pb-3 font-medium">Issues</th>
                                                <th className="pb-3 font-medium">Impact</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {problemTrains.map((train, idx) => (
                                                <tr key={idx} className="border-b border-slate-700/50 hover:bg-slate-700/30 transition-colors">
                                                    <td className="py-3 font-mono font-bold text-blue-400 text-lg">{train.train4}</td>
                                                    <td className="py-3 font-mono text-slate-300">{train.train6}</td>
                                                    <td className="py-3 text-slate-300">{train.terminal}</td>
                                                    <td className="py-3">
                                                        <div className="flex flex-wrap gap-1">
                                                            {train.issues.map((issue, i) => (
                                                                <span key={i} className="bg-slate-700 px-2 py-0.5 rounded text-xs">{issue}</span>
                                                            ))}
                                                        </div>
                                                    </td>
                                                    <td className="py-3">
                                                        <span className={`px-3 py-1 rounded text-xs font-bold ${getImpactStyle(train.impact)}`}>
                                                            {train.impact}
                                                        </span>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Terminals Tab */}
                    {activeTab === 'terminals' && (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            {terminals.map((t, idx) => (
                                <div key={idx} className={`bg-slate-800 rounded-xl p-6 border transition-all hover:scale-[1.02] cursor-pointer ${
                                    t.status === 'critical' ? 'border-red-500/50 hover:border-red-500' :
                                    t.status === 'warning' ? 'border-yellow-500/50 hover:border-yellow-500' :
                                    'border-green-500/50 hover:border-green-500'
                                }`}>
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className={`w-4 h-4 rounded-full ${getStatusColor(t.status)}`}></div>
                                        <h3 className="font-semibold text-lg">{t.name}</h3>
                                    </div>
                                    <p className="text-slate-400 text-sm mb-4">{t.mainIssue}</p>
                                    <div className="flex justify-between items-end">
                                        <div>
                                            <span className="text-4xl font-bold">{t.issues}</span>
                                            <p className="text-slate-500 text-sm">active issues</p>
                                        </div>
                                        <span className={`px-3 py-1 rounded-full text-xs font-bold uppercase ${
                                            t.status === 'critical' ? 'bg-red-500/20 text-red-400' :
                                            t.status === 'warning' ? 'bg-yellow-500/20 text-yellow-400' :
                                            'bg-green-500/20 text-green-400'
                                        }`}>{t.status}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    {/* Trains Tab */}
                    {activeTab === 'trains' && (
                        <div className="bg-slate-800 rounded-xl p-6 border border-slate-700">
                            <h2 className="font-semibold text-lg mb-2">Train-4 Pattern Analysis</h2>
                            <p className="text-slate-400 text-sm mb-6">With 500+ transcripts, patterns would emerge showing which train profiles consistently have issues across days/weeks.</p>
                            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                {problemTrains.map((train, idx) => (
                                    <div key={idx} className="bg-slate-700 rounded-xl p-5 text-center hover:bg-slate-600 cursor-pointer transition-all hover:scale-105">
                                        <p className="text-3xl font-mono font-bold text-blue-400 mb-2">{train.train4}</p>
                                        <p className="text-xs text-slate-400 mb-3">1 occurrence (sample)</p>
                                        <span className={`inline-block px-3 py-1 rounded text-xs font-bold ${getImpactStyle(train.impact)}`}>
                                            {train.impact}
                                        </span>
                                        <p className="text-xs text-slate-500 mt-2">{train.terminal}</p>
                                    </div>
                                ))}
                            </div>
                            <div className="mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg">
                                <p className="text-blue-400 text-sm">
                                    <strong>üí° With 500 transcripts:</strong> This view would show Train-4 profiles ranked by frequency of issues, 
                                    day-of-week patterns, and terminal correlations. For example: "M585 has issues 47 times, primarily on Mon/Wed/Fri at Nashville."
                                </p>
                            </div>
                        </div>
                    )}

                    {/* Constraints Tab */}
                    {activeTab === 'constraints' && (
                        <div className="bg-slate-800 rounded-xl p-6 border border-slate-700">
                            <h2 className="font-semibold text-lg mb-2">Constraint Analysis</h2>
                            <p className="text-slate-400 text-sm mb-6">Based on Theory of Constraints (Goldratt) - categorized as Physical or Procedural</p>
                            <div className="space-y-4">
                                {constraints.map((c, idx) => (
                                    <div key={idx} className={`rounded-xl p-5 border ${
                                        c.type === 'Physical' 
                                            ? 'bg-blue-500/10 border-blue-500/30' 
                                            : 'bg-purple-500/10 border-purple-500/30'
                                    }`}>
                                        <div className="flex items-start gap-4">
                                            <span className={`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap ${
                                                c.type === 'Physical' ? 'bg-blue-600 text-white' : 'bg-purple-600 text-white'
                                            }`}>
                                                {c.type}
                                            </span>
                                            <div className="flex-1">
                                                <h3 className="font-semibold text-lg mb-2">{c.name}</h3>
                                                <div className="grid md:grid-cols-2 gap-4 text-sm">
                                                    <div>
                                                        <p className="text-slate-500 text-xs uppercase tracking-wide mb-1">Root Cause</p>
                                                        <p className="text-slate-300">{c.cause}</p>
                                                    </div>
                                                    <div>
                                                        <p className="text-slate-500 text-xs uppercase tracking-wide mb-1">Recommended Solution</p>
                                                        <p className="text-green-400">{c.solution}</p>
                                                    </div>
                                                </div>
                                                <p className="text-xs text-slate-500 mt-3">üìç Location: {c.location}</p>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* Trends Tab */}
                    {activeTab === 'trends' && (
                        <div className="space-y-4">
                            <div className="bg-slate-800 rounded-xl p-6 border border-slate-700">
                                <h2 className="font-semibold text-lg mb-2">Trend Analysis</h2>
                                <p className="text-slate-400 text-sm mb-6">With 500+ transcripts, this view would show patterns across time</p>
                                
                                <div className="grid md:grid-cols-3 gap-6">
                                    <div className="bg-slate-700/50 rounded-xl p-5">
                                        <h3 className="font-medium mb-4 text-blue-400">üìÖ Day of Week Pattern</h3>
                                        <div className="space-y-2">
                                            {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map((day, i) => (
                                                <div key={day} className="flex items-center gap-3">
                                                    <span className="w-10 text-xs text-slate-400">{day}</span>
                                                    <div className="flex-1 h-5 bg-slate-600 rounded-full overflow-hidden">
                                                        <div 
                                                            className="h-full bg-blue-500 rounded-full transition-all" 
                                                            style={{width: `${[85, 72, 68, 75, 80, 45, 30][i]}%`}}
                                                        ></div>
                                                    </div>
                                                    <span className="text-xs text-slate-400 w-8">{[85, 72, 68, 75, 80, 45, 30][i]}%</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="bg-slate-700/50 rounded-xl p-5">
                                        <h3 className="font-medium mb-4 text-yellow-400">üå°Ô∏è Weather Correlation</h3>
                                        <div className="space-y-4">
                                            <div className="flex justify-between items-center">
                                                <span className="text-slate-300">Cold Events (&lt;20¬∞F)</span>
                                                <span className="text-red-400 font-bold">+340% switch issues</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <span className="text-slate-300">Snow Events</span>
                                                <span className="text-orange-400 font-bold">+180% delays</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <span className="text-slate-300">Rain Events</span>
                                                <span className="text-yellow-400 font-bold">+45% track lights</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="bg-slate-700/50 rounded-xl p-5">
                                        <h3 className="font-medium mb-4 text-green-400">üî• Top Recurring Issues</h3>
                                        <div className="space-y-3 text-sm">
                                            <div className="flex items-center gap-2">
                                                <span className="w-6 h-6 bg-red-500/20 text-red-400 rounded-full flex items-center justify-center text-xs font-bold">1</span>
                                                <span>Nashville switch failures</span>
                                            </div>
                                            <div className="flex items-center gap-2">
                                                <span className="w-6 h-6 bg-orange-500/20 text-orange-400 rounded-full flex items-center justify-center text-xs font-bold">2</span>
                                                <span>Selkirk spacing</span>
                                            </div>
                                            <div className="flex items-center gap-2">
                                                <span className="w-6 h-6 bg-yellow-500/20 text-yellow-400 rounded-full flex items-center justify-center text-xs font-bold">3</span>
                                                <span>Cleveland congestion</span>
                                            </div>
                                            <div className="flex items-center gap-2">
                                                <span className="w-6 h-6 bg-blue-500/20 text-blue-400 rounded-full flex items-center justify-center text-xs font-bold">4</span>
                                                <span>UPS train delays</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl p-6 border border-blue-500/30">
                                <h3 className="font-semibold mb-2">üéØ Predictive Capability (Phase 4)</h3>
                                <p className="text-slate-300 text-sm">
                                    With historical data, the system could predict: "When temperature drops below 20¬∞F in Nashville, 
                                    expect 3-4x switch failures. Pre-position maintainers at North Radnor crossover 2 hours before cold front arrives."
                                </p>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <div className="mt-8 text-center text-slate-500 text-sm border-t border-slate-800 pt-6">
                        <p>Railroad Operations Intelligence Platform ‚Ä¢ Sample Analysis from January 27, 2026 Transcript</p>
                        <p className="mt-1">Built with React + Tailwind CSS ‚Ä¢ Data extracted via LLM analysis</p>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RailroadOpsDashboard />);
    </script>
</body>
</html>
